# Namespace configuration
namespace: kubeguard

# Replica configuration
replicaCount: 2

# Application image configuration
image:
  repository: kubeguard
  tag: "1.0.0"
  pullPolicy: IfNotPresent

# Service configuration
service:
  type: ClusterIP
  port: 80
  targetPort: 8080

# Service Account configuration
serviceAccount:
  name: kubeguard
  create: true

# ConfigMap configuration
configMap:
  name: kubeguard-config
  create: true

# Secret configuration
secretName: kubeguard-secrets

# PostgreSQL configuration
postgres:
  image:
    repository: postgres
    tag: "17-alpine"
  database:
    name: kubeguard
    user: kubeguard
    password: ""  # Set via secret
  persistence:
    enabled: true
    size: 10Gi
    storageClass: ""  # Use default storage class

# Resource limits and requests
resources:
  limits:
    cpu: "1000m"
    memory: "1Gi"
  requests:
    cpu: "250m"
    memory: "512Mi"

# Horizontal Pod Autoscaler
hpa:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  cpuUtilization: 70
  memoryUtilization: 80

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  host: kubeguard.yourdomain.com
  tls:
    enabled: true
    secretName: kubeguard-tls

# Network Policy
networkPolicy:
  enabled: true
  policyTypes:
    - Ingress
    - Egress

# Pod Disruption Budget
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# RBAC configuration
rbac:
  enabled: true
  create: true

# Application configuration
config:
  application:
    logging:
      level:
        com.kubeguard: INFO
        root: WARN
    management:
      endpoints:
        web:
          exposure:
            include: health,info,metrics,prometheus
    kubeguard:
      security:
        rules:
          enabled: true
          strict-mode: false
      scan:
        max-concurrent: 10
        timeout-minutes: 30
        cleanup-days: 7

# Secrets (base64 encoded values)
secrets:
  dbPassword: ""  # Base64 encoded value for DB_PASSWORD

# Monitoring configuration
monitoring:
  prometheus:
    enabled: true
    scrape: true
    path: /actuator/prometheus
    port: 8080

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1001
  runAsGroup: 1001
  fsGroup: 1001
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true

# Affinity and tolerations
affinity:
  podAntiAffinity:
    enabled: true
    type: preferred  # or "required"

tolerations: []

nodeSelector: {}